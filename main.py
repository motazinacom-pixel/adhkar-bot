from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, CallbackQueryHandler, ContextTypes
import random

#قائمة الأذكار العامة

adhkar_general = [ "سبحان الله وبحمده، سبحان الله العظيم", "لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير", "اللهم صل وسلم على نبينا محمد", "لا حول ولا قوة إلا بالله", "أستغفر الله العظيم وأتوب إليه", "حسبي الله لا إله إلا هو عليه توكلت وهو رب العرش العظيم", "اللهم اغفر لي ولوالدي وللمؤمنين يوم يقوم الحساب", "اللهم إني أعوذ بك من الهم والحزن، وأعوذ بك من العجز والكسل", "اللهم إني أعوذ بك من جهد البلاء، ودرك الشقاء، وسوء القضاء، وشماتة الأعداء" ]

# هذا الزر
keyboard = [[InlineKeyboardButton("أذكار الصباح", callback_data="adhkar_sabah")]]

# هذه قائمة الأذكار
adhkar_sabah = [ "أصبحنا وأصبح الملك لله، والحمد لله، لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير.", "اللهم بك أصبحنا وبك أمسينا وبك نحيا وبك نموت وإليك النشور.", "رضيت بالله رباً وبالإسلام ديناً وبمحمد ﷺ نبياً.", "اللهم ما أصبح بي من نعمة أو بأحد من خلقك فمنك وحدك لا شريك لك، فلك الحمد ولك الشكر.", "اللهم عافني في بدني، اللهم عافني في سمعي، اللهم عافني في بصري، لا إله إلا أنت.", "اللهم إني أسألك العفو والعافية في الدنيا والآخرة.", "اللهم استر عوراتي وآمن روعاتي، اللهم احفظني من بين يدي ومن خلفي، وعن يميني وعن شمالي، ومن فوقي، وأعوذ بعظمتك أن أغتال من تحتي." ]

InlineKeyboardButton("أذكار المساء", callback_data="adhkar_masaa")        
adhkar_masaa = [ "أمسينا وأمسى الملك لله، والحمد لله، لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير.", "اللهم بك أمسينا وبك أصبحنا وبك نحيا وبك نموت وإليك المصير.", "اللهم ما أمسى بي من نعمة أو بأحد من خلقك فمنك وحدك لا شريك لك، فلك الحمد ولك الشكر.", "أعوذ بكلمات الله التامات من شر ما خلق.", "اللهم إني أمسيت أشهدك وأشهد حملة عرشك وملائكتك وجميع خلقك أنك أنت الله لا إله إلا أنت وحدك لا شريك لك، وأن محمدًا عبدك ورسولك (4 مرات).", "اللهم إني أعوذ بك من الهم والحزن، وأعوذ بك من العجز والكسل.", "اللهم إني أعوذ بك من جهد البلاء، ودرك الشقاء، وسوء القضاء، وشماتة الأعداء." ]

InlineKeyboardButton("أذكار قبل النوم", callback_data="adhkar_sleep")

adhkar_sleep = [ "بِاسْمِكَ اللّهُمَّ أَمُوتُ وَأَحْيَا.", "اللهم قِني عذابك يوم تبعث عبادك.", "اللهم باسمك وضعت جنبي وبك أرفعه، إن أمسكت نفسي فارحمها، وإن أرسلتها فاحفظها بما تحفظ به عبادك الصالحين.", "اللهم أسلمت نفسي إليك، وفوضت أمري إليك، وألجأت ظهري إليك، لا ملجأ ولا منجى منك إلا إليك، آمنت بكتابك الذي أنزلت، وبنبيك الذي أرسلت.", "سبحان الله (٣٣)، الحمد لله (٣٣)، الله أكبر (٣٤)." ]

InlineKeyboardButton("سورة الملك", callback_data="sorat_almulk")

sura_al_mulk = """📖 سورة الملك كاملة (30 آية) بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ

1. تَبَارَكَ الَّذِي بِيَدِهِ الْمُلْكُ وَهُوَ عَلَىٰ كُلِّ شَيْءٍ قَدِيرٌ


2. الَّذِي خَلَقَ الْمَوْتَ وَالْحَيَاةَ لِيَبْلُوَكُمْ أَيُّكُمْ أَحْسَنُ عَمَلًا ۚ وَهُوَ الْعَزِيزُ الْغَفُورُ


3. الَّذِي خَلَقَ سَبْعَ سَمَاوَاتٍ طِبَاقًا ۖ مَا تَرَىٰ فِي خَلْقِ الرَّحْمَٰنِ مِن تَفَاوُتٍ ۖ فَارْجِعِ الْبَصَرَ هَلْ تَرَىٰ مِن فُطُورٍ


4. ثُمَّ ارْجِعِ الْبَصَرَ كَرَّتَيْنِ يَنقَلِبْ إِلَيْكَ الْبَصَرُ خَاسِئًا وَهُوَ حَسِيرٌ


5. وَلَقَدْ زَيَّنَّا السَّمَاءَ الدُّنْيَا بِمَصَابِيحَ وَجَعَلْنَاهَا رُجُومًا لِّلشَّيَاطِينِ ۖ وَأَعْتَدْنَا لَهُمْ عَذَابَ السَّعِيرِ


6. وَلِلَّذِينَ كَفَرُوا بِرَبِّهِمْ عَذَابُ جَهَنَّمَ ۖ وَبِئْسَ الْمَصِيرُ


7. إِذَا أُلْقُوا فِيهَا سَمِعُوا لَهَا شَهِيقًا وَهِيَ تَفُورُ


8. تَكَادُ تَمَيَّزُ مِنَ الْغَيْظِ ۖ كُلَّمَا أُلْقِيَ فِيهَا فَوْجٌ سَأَلَهُمْ خَزَنَتُهَا أَلَمْ يَأْتِكُمْ نَذِيرٌ


9. قَالُوا بَلَىٰ قَدْ جَاءَنَا نَذِيرٌ فَكَذَّبْنَا وَقُلْنَا مَا نَزَّلَ اللَّهُ مِن شَيْءٍ ۙ إِنْ أَنتُمْ إِلَّا فِي ضَلَالٍ كَبِيرٍ


10. وَقَالُوا لَوْ كُنَّا نَسْمَعُ أَوْ نَعْقِلُ مَا كُنَّا فِي أَصْحَابِ السَّعِيرِ


11. فَاعْتَرَفُوا بِذَنبِهِمْ فَسُحْقًا لِّأَصْحَابِ السَّعِيرِ


12. إِنَّ الَّذِينَ يَخْشَوْنَ رَبَّهُم بِالْغَيْبِ لَهُم مَّغْفِرَةٌ وَأَجْرٌ كَبِيرٌ


13. وَأَسِرُّوا قَوْلَكُمْ أَوِ اجْهَرُوا بِهِ ۖ إِنَّهُ عَلِيمٌ بِذَاتِ الصُّدُورِ


14. أَلَا يَعْلَمُ مَنْ خَلَقَ وَهُوَ اللَّطِيفُ الْخَبِيرُ


15. هُوَ الَّذِي جَعَلَ لَكُمُ الْأَرْضَ ذَلُولًا فَامْشُوا فِي مَنَاكِبِهَا وَكُلُوا مِن رِّزْقِهِ ۖ وَإِلَيْهِ النُّشُورُ


16. أَأَمِنتُم مَّن فِي السَّمَاءِ أَن يَخْسِفَ بِكُمُ الْأَرْضَ فَإِذَا هِيَ تَمُورُ


17. أَمْ أَمِنتُم مَّن فِي السَّمَاءِ أَن يُرْسِلَ عَلَيْكُمْ حَاصِبًا ۖ فَسَتَعْلَمُونَ كَيْفَ نَذِيرِ


18. وَلَقَدْ كَذَّبَ الَّذِينَ مِن قَبْلِهِمْ فَكَيْفَ كَانَ نَكِيرِ


19. أَوَلَمْ يَرَوْا إِلَى الطَّيْرِ فَوْقَهُمْ صَافَّاتٍ وَيَقْبِضْنَ ۚ مَا يُمْسِكُهُنَّ إِلَّا الرَّحْمَٰنُ ۚ إِنَّهُ بِكُلِّ شَيْءٍ بَصِيرٌ


20. أَمَّنْ هَٰذَا الَّذِي هُوَ جُندٌ لَّكُمْ يَنصُرُكُم مِّن دُونِ الرَّحْمَٰنِ ۚ إِنِ الْكَافِرُونَ إِلَّا فِي غُرُورٍ


21. أَمَّنْ هَٰذَا الَّذِي يَرْزُقُكُمْ إِنْ أَمْسَكَ رِزْقَهُ ۚ بَل لَّجُّوا فِي عُتُوٍّ وَنُفُورٍ


22. أَفَمَن يَمْشِي مُكِبًّا عَلَىٰ وَجْهِهِ أَهْدَىٰ أَمَّن يَمْشِي سَوِيًّا عَلَىٰ صِرَاطٍ مُّسْتَقِيمٍ


23. قُلْ هُوَ الَّذِي أَنشَأَكُمْ وَجَعَلَ لَكُمُ السَّمْعَ وَالْأَبْصَارَ وَالْأَفْئِدَةَ ۖ قَلِيلًا مَّا تَشْكُرُونَ


24. قُلْ هُوَ الَّذِي ذَرَأَكُمْ فِي الْأَرْضِ وَإِلَيْهِ تُحْشَرُونَ


25. وَيَقُولُونَ مَتَىٰ هَٰذَا الْوَعْدُ إِن كُنتُمْ صَادِقِينَ


26. قُلْ إِنَّمَا الْعِلْمُ عِندَ اللَّهِ ۖ وَإِنَّمَا أَنَا نَذِيرٌ مُّبِينٌ


27. فَلَمَّا رَأَوْهُ زُلْفَةً سِيئَتْ وُجُوهُ الَّذِينَ كَفَرُوا وَقِيلَ هَٰذَا الَّذِي كُنتُم بِهِ تَدَّعُونَ


28. قُلْ أَرَأَيْتُمْ إِنْ أَهْلَكَنِيَ اللَّهُ وَمَن مَّعِيَ أَوْ رَحِمَنَا فَمَن يُجِيرُ الْكَافِرِينَ مِنْ عَذَابٍ أَلِيمٍ


29. قُلْ هُوَ الرَّحْمَٰنُ آمَنَّا بِهِ وَعَلَيْهِ تَوَكَّلْنَا ۖ فَسَتَعْلَمُونَ مَنْ هُوَ فِي ضَلَالٍ مُّبِينٍ


30. قُلْ أَرَأَيْتُمْ إِنْ أَصْبَحَ مَاؤُكُمْ غَوْرًا فَمَن يَأْتِيكُم بِمَاءٍ معِيّنٍ                   """



#بدء البوت بزر
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = [
        [InlineKeyboardButton("📖 سورة الملك", callback_data='mulk')],
        [InlineKeyboardButton("☀️ أذكار الصباح", callback_data='sabah')],
        [InlineKeyboardButton("🌙 أذكار المساء", callback_data='masaa')],
        [InlineKeyboardButton("🕊️ ذكر عشوائي", callback_data='random')],
        [InlineKeyboardButton("😴 أذكار النوم", callback_data='sleep')]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    await update.message.reply_text('اختر من القائمة:', reply_markup=reply_markup)

async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    data = query.data

    if data == 'mulk':
        await query.edit_message_text(sura_al_mulk)
    elif data == 'sabah':
        await query.edit_message_text("☀️ أذكار الصباح:\n" + "\n".join(adhkar_sabah))
    elif data == 'masaa':
        await query.edit_message_text("🌙 أذكار المساء:\n" + "\n".join(adhkar_masaa))
    elif data == 'sleep':
        await query.edit_message_text("😴 أذكار قبل النوم:\n" + "\n".join(adhkar_sleep))
    elif data == 'random':
        await query.edit_message_text("🕊️ ذكر عشوائي:\n" + random.choice(adhkar_general))

#ربط الأوامر

app = ApplicationBuilder().token("8473622976:AAEs98rDE2Mkgq2y1qjLBXJxMuASp_yjXaU").build()

app.add_handler(CommandHandler("start", start))
app.add_handler(CallbackQueryHandler(button_handler))

app.run_webhook(
    listen="0.0.0.0",
    port=10000,
    webhook_url="https://adhkar-bot-2.onrender.com"
)

